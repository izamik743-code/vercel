# üöÄ TON Mystery Cases - Supabase Setup

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (5 –º–∏–Ω—É—Ç)

### 1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö Supabase

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [supabase.com](https://supabase.com)
   - –í–æ–π–¥–∏—Ç–µ –≤ –ø—Ä–æ–µ–∫—Ç: `jhtufrleluowmnzgrgrr`

2. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **SQL Editor**
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `scripts/supabase-setup.sql`
   - –ù–∞–∂–º–∏—Ç–µ **Run**

### 2. –ü–æ–ª—É—á–∏—Ç–µ –∫–ª—é—á–∏ Supabase

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings > API**
2. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ Service Role Key** (–Ω–µ anon key!)

### 3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env.local

```env
# Supabase Configuration
NEXT_PUBLIC_SUPABASE_URL=https://jhtufrleluowmnzgrgrr.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpodHVmcmxlbHVvd21uemdyZ3JyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc4MTg4MzEsImV4cCI6MjA3MzM5NDgzMX0.1Tt9lqSsjGFcy07D6Ct8fVTrDl2CEGDOUhfrQ1E96jw
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here

# Admin Configuration
ADMIN_SECRET_KEY=your_admin_secret_key_here
NEXT_PUBLIC_ADMIN_KEY=your_admin_secret_key_here
NEXT_PUBLIC_ADMIN_PASSWORD=your_admin_password_here

# App Configuration
NEXT_PUBLIC_APP_URL=https://your-app.vercel.app
NEXT_PUBLIC_API_URL=/api
```

### 4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ Supabase
npm run test:supabase

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
npm run dev
```

### 5. –î–µ–ø–ª–æ–π –Ω–∞ Vercel

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫ GitHub**
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel**
3. **–î–µ–ø–ª–æ–π!**

## üéØ –ß—Ç–æ –ø–æ–ª—É—á–∏—Ç–µ

- ‚úÖ **–†–∞–±–æ—á–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ Supabase
- ‚úÖ **API endpoints** - –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ **–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- ‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é** - –æ–¥–∏–Ω –∫–ª–∏–∫ –Ω–∞ Vercel

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü—ã:
- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ Telegram
- `transactions` - –∏—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- `inventory` - –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –§—É–Ω–∫—Ü–∏–∏:
- `get_user_stats()` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `get_admin_stats()` - –∞–¥–º–∏–Ω —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è:
- `admin_users_view` - –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Supabase
npm run test:supabase

# –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞
npm run dev

# –°–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
npm run build
```

## üêõ Troubleshooting

### –û—à–∏–±–∫–∞ "Database error"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ SQL —Å–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã

### –û—à–∏–±–∫–∞ "User not found"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `SUPABASE_SERVICE_ROLE_KEY` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

### –û—à–∏–±–∫–∞ "Invalid token"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `NEXT_PUBLIC_SUPABASE_ANON_KEY`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–ª—é—á —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é

## üìÅ –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

- `scripts/supabase-setup.sql` - SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã
- `scripts/test-supabase.js` - —Å–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `app/api/` - API endpoints
- `SUPABASE_SETUP_GUIDE.md` - –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ —É –≤–∞—Å –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–µ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å Supabase!

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏** –ª–æ–∫–∞–ª—å–Ω–æ
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Telegram –±–æ—Ç–∞** (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
3. **–î–µ–ø–ª–æ–π—Ç–µ –Ω–∞ Vercel**
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω** (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

## üÜò –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Supabase Dashboard
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `npm run test:supabase`
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∑–∞ –ø–æ–º–æ—â—å—é —Å –ª–æ–≥–∞–º–∏ –æ—à–∏–±–æ–∫
